<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../../img/favicon.ico">
  <title>Deploying galaxy-kickstart on local virtual machine (VM) using vagrant. - GalaxyKickStart</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../../css/highlight.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Deploying galaxy-kickstart on local virtual machine (VM) using vagrant.";
    var mkdocs_page_input_path = "examples/vagrant.md";
    var mkdocs_page_url = "/examples/vagrant/";
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js"></script>
  <script src="../../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../../js/highlight.pack.js"></script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> GalaxyKickStart</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="../..">Home</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../about/">What is GalaxyKickStart</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../getting_started/">Getting started</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../customizations/">Customising the playbook</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../installing_tools_and_workflows/">Installing tools and workflows</a>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Examples</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../docker/">Docker</a>
                </li>
                <li class=" current">
                    
    <a class="current" href="./">Deploying galaxy-kickstart on local virtual machine (VM) using vagrant.</a>
    <ul class="subnav">
            
    <li class="toctree-l3"><a href="#deploying-galaxy-kickstart-on-local-virtual-machine-vm-using-vagrant">Deploying galaxy-kickstart on local virtual machine (VM) using vagrant.</a></li>
    

    <li class="toctree-l3"><a href="#requirements">Requirements</a></li>
    

    <li class="toctree-l3"><a href="#running-the-playbook-on-a-virtual-machine">Running the playbook on a Virtual Machine</a></li>
    

    <li class="toctree-l3"><a href="#cleaning-up">Cleaning up</a></li>
    

    </ul>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../faq/">Frequently asked questions</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../available_roles/">Available roles</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../available_variables/">Available variables</a>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">GalaxyKickStart Use Cases</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../metavisitor/">Metavisitor</a>
                </li>
                <li class="">
                    
    <a class="" href="../../GKS2slurm/">GKS2slurm</a>
                </li>
                <li class="">
                    
    <a class="" href="../../GKSfromWorflows/">GKSfromWorflows</a>
                </li>
    </ul>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">GalaxyKickStart</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>Examples &raquo;</li>
        
      
    
    <li>Deploying galaxy-kickstart on local virtual machine (VM) using vagrant.</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="deploying-galaxy-kickstart-on-local-virtual-machine-vm-using-vagrant">Deploying galaxy-kickstart on local virtual machine (VM) using vagrant.</h1>
<hr />
<p>GalaxyKickStart is designed to be flexible and powerful, but for demonstration purposes we start a simple vagrant box
that runs this playbook. Following these instructions will not change the host system.
Alternatively, see <a href="../docker/">examples/docker</a> for running the playbook in docker,
or <a href="../../getting_started/">getting started</a> for running the playbook on local or remote machines.</p>
<h1 id="requirements">Requirements</h1>
<p>To follow the examples <a href="https://docs.ansible.com/ansible/intro_installation.html">ansible</a>, <a href="https://www.vagrantup.com/downloads.html">vagrant</a>
and <a href="https://git-scm.com/downloads">git</a> need to be installed.</p>
<h1 id="running-the-playbook-on-a-virtual-machine">Running the playbook on a Virtual Machine</h1>
<p>The Vagrantfile describes a Virtual Machine (VM) that is based on Ubuntu 14.04 (codename trusty).</p>
<pre><code>VAGRANTFILE_API_VERSION = &quot;2&quot;
   Vagrant.configure(VAGRANTFILE_API_VERSION) do |config|
      config.vm.box = &quot;ubuntu/trusty64&quot;
      config.vm.network &quot;forwarded_port&quot;, guest: 80, host: 8080
      config.vm.network &quot;forwarded_port&quot;, guest: 21, host: 2121

      config.vm.provider &quot;virtualbox&quot; do |v|
         v.memory = 4096
      end

      config.vm.provision &quot;ansible&quot; do |ansible|
         ansible.extra_vars = {
            ntp_server: &quot;pool.ntp.org&quot;,
            ansible_ssh_user: 'vagrant'
         }
         ansible.verbose = 'vvvv'
         ansible.playbook = &quot;galaxy.yml&quot;
      end
   end
</code></pre>

<p>By default, port 8080 will be forwarded to port 80, and port 2121 will be forwarded to port 21 (for FTP),
and 4096 MB of memory will be attributed to the VM.
Enter the playbook directory <code>cd GalaxyKickStart</code> and type <code>vagrant up</code> to download a VM image and run the <code>galaxy.yml</code> playbook.</p>
<p>This will take a while. Once finished, you should find a running Galaxy Instance on http://localhost:8080 .
If you would like to see the internals of the VM, you can log into the machine by typing <code>vagrant ssh</code>.</p>
<p><code>vagrant up</code> makes use of the ansible provisioner and is equivalent of starting a vagrant machine without the ansible provisioner
and running ansible through an ssh connection to the vagrant machine (which listens by default on port 2222)
The hosts inventory file contains an example for directly pointing ansible to the vagrant machine.
Uncomment the vagrant specific lines and comment or remove the remaining lines:</p>
<pre><code>#[artimed]
#localhost ansible_ssh_user=&quot;root&quot; ansible_ssh_private_key_file=&quot;~/.ssh/id_rsa&quot;
#[travis_bioblend]
#localhost ansible_connection=local
# Uncomment the 2 lines below to point ansible to a local vagrant machine.
[all]
localhost ansible_user=&quot;vagrant&quot; ansible_port=2222 ansible_private_key_file=.vagrant/machines/default/virtualbox/private_key
#[aws]
# Put you aws IP and key here to make FTP work in the default VPC.
# If you want further group-specific variables, put the host in these groups as well [e.g artimed].
</code></pre>

<p>To run the playbook again, type</p>
<pre><code>ansible-playbook --inventory-file=&lt;your_inventory&gt; galaxy.yml
</code></pre>

<h1 id="cleaning-up">Cleaning up</h1>
<p>The VM image and various config files have been written to the <code>.vagrant</code> folder. Type <code>vagrant halt</code> to stop the running instance
and <code>vagrant destroy</code> to remove the VM, and then delete the <code>.vagrant</code> folder.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../../faq/" class="btn btn-neutral float-right" title="Frequently asked questions">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../docker/" class="btn btn-neutral" title="Docker"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../docker/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../../faq/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme.js"></script>
      <script src="../../search/require.js"></script>
      <script src="../../search/search.js"></script>

</body>
</html>
