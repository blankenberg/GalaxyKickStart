<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>Customising the playbook - GalaxyKickStart</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../css/highlight.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Customising the playbook";
    var mkdocs_page_input_path = "customizations.md";
    var mkdocs_page_url = "/customizations/";
  </script>
  
  <script src="../js/jquery-2.1.1.min.js"></script>
  <script src="../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../js/highlight.pack.js"></script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> GalaxyKickStart</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="..">Home</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../about/">What is GalaxyKickStart</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../getting_started/">Getting started</a>
	    </li>
          
            <li class="toctree-l1 current">
		
    <a class="current" href="./">Customising the playbook</a>
    <ul class="subnav">
            
    <li class="toctree-l2"><a href="#customising-the-playbook">Customising the playbook</a></li>
    

    <li class="toctree-l2"><a href="#important-variables">Important variables</a></li>
    

    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../installing_tools_and_workflows/">Installing tools and workflows</a>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Examples</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../examples/docker/">Docker</a>
                </li>
                <li class="">
                    
    <a class="" href="../examples/vagrant/">Vagrant</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../faq/">Frequently asked questions</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../available_roles/">Available roles</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../available_variables/">Available variables</a>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">GalaxyKickStart Use Cases</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../metavisitor/">Metavisitor</a>
                </li>
                <li class="">
                    
    <a class="" href="../GKS2slurm/">GKS2slurm</a>
                </li>
                <li class="">
                    
    <a class="" href="../GKSfromWorflows/">GKSfromWorflows</a>
                </li>
    </ul>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">GalaxyKickStart</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
    
    <li>Customising the playbook</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="customising-the-playbook">Customising the playbook</h1>
<p>We strongly encourage users to read the <a href="https://docs.ansible.com/ansible/intro_inventory.html">ansible inventory</a> documentation first.</p>
<p>Most settings should be editable without modifying the playbook directly,
instead variables can be set in group_vars and host vars.</p>
<p>The playbook comes with an example inventory file <code>hosts</code>.</p>
<pre><code>[artimed]
localhost ansible_ssh_user=&quot;root&quot; ansible_ssh_private_key_file=&quot;~/.ssh/id_rsa&quot;
[travis_bioblend]
localhost ansible_connection=local
[aws]
# Put you aws IP and key here to make FTP work in the default VPC.
# If you want further group-specific variables, put the host in these groups as well [e.g artimed].
</code></pre>

<p><code>[artimed]</code>, <code>[travis_bioblend]</code> and <code>[aws]</code> are predefined groups. Any host (here we only have localhost) that
is added to one or multiple groups will have the corresponding group variables applied.
Group variables are defined in <code>group_vars/[name of the group]</code> and default variables are found in <br />
<code>group_vars/all</code>.
All variables defined in <code>group_vars/all</code> are overwritten in <code>group_vars/[name of the group]</code>.  </p>
<p>For instance the variable <code>proftpd_nat_masquerade</code> is set to <code>false</code> in <code>group_vars/all</code>, while hosts in the <code>[aws]</code> group
apply the <code>[aws]</code> group variables which set <code>proftpd_nat_masquerade</code> to true, so that hosts in the aws group will have
this aws-specific setting applied. Any combination of groups may be used.</p>
<p>If you want to apply any of the changes you made to the variables you need to run the playbook again, making sure that
the host you are targeting is in the right group. The simplest way to do so is to use an inventory file that only contains
the group and the host you wish to target. If this is for example the group metavisitor, and you target the host localhost,
your inventory file should look like this:</p>
<pre><code>[metavisitor]
localhost
</code></pre>

<p>You can then run the playbook as usual:</p>
<pre><code>ansible-playbook --inventory-file=&lt;your_inventory_file&gt; galaxy.yml
</code></pre>

<h1 id="important-variables">Important variables</h1>
<p>We aimed for this playbook to be reusable. We therefore made most variables configurable.
The group_vars/all file contains the variables we have chosen as defaults. You may override them either in this file
or you can use ansible group variables to selectively set the variables for certain hosts/groups. See the <a href="http://docs.ansible.com/ansible/intro_inventory.html#splitting-out-host-and-group-specific-data">ansible documentation
about group variables</a> for details.</p>
<p>These most important variables are:</p>
<ul>
<li>
<p>ansible_ssh_user - The login name used to access the target.</p>
</li>
<li>
<p>ansible_ssh_private_key_file - The ssh private key used to access the target.</p>
</li>
<li>
<p>install_galaxy - True for install a Galaxy instance.</p>
</li>
<li>
<p>install_tools - True for install the NGS tools.</p>
</li>
<li>
<p>run_data_manager - True for run the data manager procedure.</p>
</li>
<li>
<p>galaxy_user_name - The Operating System user name for galaxy process.</p>
</li>
<li>
<p>galaxy_server_dir - The home of Operating System user for galaxy process.</p>
</li>
<li>
<p>galaxy_admin - The admin galaxy user.</p>
</li>
<li>
<p>galaxy_admin_pw - The admin galaxy password.</p>
</li>
<li>
<p>default_admin_api_key - The api key for tool installation and download reference genomes throught galaxy data managers. To be removed in production.</p>
</li>
<li>
<p>galaxy_tool_list - The files that constants the list of tools to be installed.</p>
</li>
<li>
<p>galaxy_data_managers - The reference genomes and indexes to be load and build.</p>
</li>
<li>
<p>galaxy_data - The persistent directory where the galaxy config and database directories will be installed or will be recovered.</p>
</li>
<li>
<p>galaxy_database - The persistent directory where postgresql will be installed or will be recovered.</p>
</li>
<li>
<p>galaxy_db - Connection string for galaxy-postgresql.</p>
</li>
<li>
<p>galaxy_changeset_id - The release of Galaxy to be installed (master, dev or release_xx_xx).</p>
</li>
</ul>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../installing_tools_and_workflows/" class="btn btn-neutral float-right" title="Installing tools and workflows">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../getting_started/" class="btn btn-neutral" title="Getting started"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../getting_started/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../installing_tools_and_workflows/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme.js"></script>
      <script src="../search/require.js"></script>
      <script src="../search/search.js"></script>

</body>
</html>
